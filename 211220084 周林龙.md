## <center>科研实践-虚拟主播第二阶段技术报告</center>
<p align = right>211220084 周林龙</p>  

<!-- @import "[TOC]" {cmd="toc" depthFrom=1 depthTo=6 orderedList=false} -->

<!-- code_chunk_output -->

- [科研实践-虚拟主播第二阶段技术报告](#center科研实践-虚拟主播第二阶段技术报告center)
  - [1. 实现思路](#1-实现思路)
  - [2. 实现过程](#2-实现过程)
    - [2.1 虚拟主播形象与人设、](#21-虚拟主播形象与人设)
    - [2.2 获取直播间弹幕](#22-获取直播间弹幕)
    - [2.3 获取AI文本回复](#23-获取ai文本回复)
    - [2.4 转换语音回复](#24-转换语音回复)
  - [3. 效果展示](#3-效果展示)

<!-- /code_chunk_output -->

<p style="page-break-after:always;"></p>

### 1. 实现思路
具体虚拟主播的实现分为以下几部分：

- 获取live2D虚拟主播形象并构造其人设
- 获取直播间观众发送的弹幕
- 通过ChatGpt或其他大语言模型输入人设和弹幕，获取AI文本回复
- 通过TTS技术将AI的文本回复转为语音回复
- 根据回复改变虚拟形象的口型和动作等

### 2. 实现过程
#### 2.1 虚拟主播形象与人设、

这里我选择使用[B站up一个ayabe的live2d模型-简单小白猫](https://www.bilibili.com/video/BV14v4y1p7eR)，导入到VTube Studio后效果如下

图片



#### 2.2 获取直播间弹幕

最初选择按照段鑫宇、韩楚宇同学示例中的[B站up澪式烧酒的教程视频](https://www.bilibili.com/video/BV1EM411T7PR/)进行操作，但实操安装配置完Python及相关环境后，运行start.py文件并不能正确将直播间的弹幕获取到终端上，如下图。
![image-20240122151832069](\image\image-20240122151832069.png)

并且获取弹幕并不是一定失败，不改变文件的情况下多次运行中存在成功获取弹幕的可能，但并没有排查出问题，最后看到这个B站UP使用的是[blivedm: 获取bilibili直播弹幕](https://github.com/xfgryujk/blivedm)的接口，我选择去github获取最新的版本进行直播间弹幕获取的测试，最后可以稳定的获取直播间弹幕，并且可以通过已登陆cookie的SESSDATA来实现登陆，避免无法查看弹幕的用户名。

![image-20240122152125892](\image\image-20240122152125892.png)

![image-20240122152536944](\image\image-20240122152536944.png)



#### 2.3 获取AI文本回复

#### 2.4 转换语音回复


### 3. 效果展示
[效果截图]
[视频文件]
[B站视频链接]
